window.layers?null:window.layers={},layers.boundaries={type:"cartodb",visible:!0,user_name:"saleiva",table_name:"usa_adm1",query:"SELECT * FROM {{table_name}}",tile_style:"#{{table_name}}::glow {line-color:#000;line-opacity:.15;polygon-opacity:0;line-width:3;[zoom>=5]{line-width:5;}[zoom>=6]{line-width:7;}}#{{table_name}} {line-color:#FFFFFF;line-width:1.5;line-opacity:1;polygon-opacity:0;[zoom>=5]{line-width:2.5;}[zoom>=6]{line-width:3.5;}}"},window.layers?null:window.layers={},layers.countyNames={type:"cartodb",user_name:"viz2",table_name:"map_guardian_gop",active:!0,visible:!0,opacity:.99,query:"SELECT cartodb_id, county_name, state_name, romney_percentage, ST_SIMPLIFY(the_geom_webmercator,1) as the_geom_webmercator,ST_ASGEOJSON(ST_SIMPLIFY(the_geom,0.0001)) as geometry FROM {{table_name}}",interactivity:"geometry, cartodb_id",textName:"county_name",__getTyleStyle:function(){var e='@font_reg:"DejaVu Sans Book";';return this.textName&&(e+='#{{table_name}}::labels[zoom>=5] {text-face-name:@font_reg;text-name:"['+this.textName+']";'+"text-fill:#FFF;"+"text-halo-fill:rgba(0,0,0,0.5);"+"text-halo-radius:1;"+"text-size:11;"+"text-allow-overlap: false;"+"text-clip: false;"+"text-label-position-tolerance: 10;"+"text-min-distance: 10;"+"}"),e}},layers.countyNames.tile_style=layers.countyNames.__getTyleStyle(),window.layers?null:window.layers={},layers.percentage={type:"cartodb",user_name:"viz2",table_name:"map_guardian_gop",active:!0,visible:!0,opacity:.99,query:"SELECT cartodb_id, county_name, state_name, romney_percentage, ST_SIMPLIFY(the_geom_webmercator,0.1) as the_geom_webmercator,ST_ASGEOJSON(ST_SIMPLIFY(the_geom,0.0001)) as geometry FROM {{table_name}}",interactivity:"geometry, cartodb_id",__featureOver:function(e,t,n,r){var i={color:"#fff",weight:2,opacity:1,fillOpacity:1,fillColor:"#333",clickable:!1};document.body.style.cursor="pointer",this.polygon&&this.vis.mapView.map_leaflet.removeLayer(this.polygon),this.polygon=(new L.GeoJSON(JSON.parse(r.geometry),{style:function(e){return i}})).addTo(this.vis.mapView.map_leaflet)},textName:"county_name",__getTyleStyle:function(){var e='@font_reg:"DejaVu Sans Book";#{{table_name}} {line-color:#FFFFFF;line-width:0;polygon-fill:#E5E5E5;line-opacity:1;polygon-opacity:1;}#{{table_name}} [romney_percentage<=100.0]{polygon-fill:#BB2D3C;}#{{table_name}} [romney_percentage<=50]{polygon-fill:#D6818A;}#{{table_name}} [romney_percentage<=30]{polygon-fill:#E4ABB1;}#{{table_name}} [romney_percentage<=15]{polygon-fill:#EAC0C4;}';return this.textName&&(e+='#{{table_name}}::labels[zoom>=5] {text-face-name:@font_reg;text-name:"['+this.textName+']";'+"text-fill:#FFF;"+"text-halo-fill:rgba(0,0,0,0.5);"+"text-halo-radius:1;"+"text-size:11;"+"text-allow-overlap: false;"+"text-label-position-tolerance: 10;"+"text-min-distance: 10;"+"}"),e},infowindow:{fields:[{name:"county_name",title:!0},{name:"state_name",title:!0},{name:"romney_percentage",title:!0}],template:"<div><% _.each(content.fields, function(f){%> <% if(f.value != undefined){ %> <div class='<%= f.title %>'> <%= f.value %> </div> <% } else { %> <div class='noData'> No data </div> <% } %> <% }) %> </div>",templateType:"underscore",eventType:"featureOver"}},layers.percentage.tile_style=layers.percentage.__getTyleStyle(),window.layers?null:window.layers={},layers.win={type:"cartodb",user_name:"viz2",table_name:"map_guardian_gop",active:!1,visible:!1,opacity:0,query:"SELECT cartodb_id, romney_wins, county_name, state_name, ST_SIMPLIFY(the_geom_webmercator,0.1) as the_geom_webmercator,ST_ASGEOJSON(ST_SIMPLIFY(the_geom,0.0001)) as geometry FROM {{table_name}}",interactivity:"geometry, cartodb_id",__featureOver:function(e,t,n,r){var i={color:"#fff",weight:2,opacity:1,fillOpacity:1,fillColor:"#333",clickable:!1};document.body.style.cursor="pointer",this.polygon&&this.vis.mapView.map_leaflet.removeLayer(this.polygon),this.polygon=(new L.GeoJSON(JSON.parse(r.geometry),{style:function(e){return i}})).addTo(this.vis.mapView.map_leaflet)},textName:"county_name",__getTyleStyle:function(){var e="@font_reg:\"DejaVu Sans Book\";#{{table_name}} {line-color:#594;line-width:0.5;polygon-opacity:1;polygon-fill:#EDEDED;}#{{table_name}} {line-color:#FFFFFF;line-width:0;line-opacity:1;polygon-opacity:1;}#{{table_name}}[romney_wins='true'] {polygon-fill:#BB2D3C;}";return this.textName&&(e+="#{{table_name}}::labels[zoom>=5][romney_wins='true'] {text-face-name:@font_reg;text-name:\"["+this.textName+']";'+"text-fill:#FFF;"+"text-halo-fill:rgba(0,0,0,0.5);"+"text-halo-radius:1;"+"text-size:11;"+"text-allow-overlap: false;"+"polygon-opacity:0;"+"text-label-position-tolerance: 10;"+"text-min-distance: 10;"+"}"),e},infowindow:{fields:[{name:"county_name",title:!0},{name:"state_name",title:!0}],template:"<div>{{#content.fields}} <div class='{{#title}}{{title}}{{/title}}' >{{value}}</div> {{/content.fields}}</div>",eventType:"featureOver"}},layers.win.tile_style=layers.win.__getTyleStyle();var romney={minZoom:4,maxZoom:9,namesOn:!1,init:function(e,t){this.map=e,this.currentMap=t,this.switchMap=this.switchMap.bind(this),this.namesOn=!0,this.tabs=[];var n=$(".tab");for(var r=0,i=n.length;r<i;r++){var s=$(n[r]);this.tabs[s.attr("data-mapId")]=s}this.legends=[];var o=$(".legend");for(var r=0,i=o.length;r<i;r++){var u=$(o[r]);this.legends[u.attr("data-mapId")]=u}this.$zoomIn=$(".zoom_in"),this.$zoomOut=$(".zoom_out"),this.$showNames=$(".show_names"),this.bindButtons()},bindButtons:function(){var e=this;for(var t=0,n=this.tabs.length;t<n;t++){var r=this.tabs[t];r.on("click",function(t){var n=$(t.currentTarget);e.selectMap(n.attr("data-mapId"))})}this.$zoomIn.on("click",this.zoom_in.bind(this)),this.$zoomOut.on("click",this.zoom_out.bind(this)),this.$showNames.on("click",this.toggleNames.bind(this))},switchMap:function(){var e=this.map;e.layers.models[this.currentMap].deactivate(),this.currentMap?this.currentMap=0:this.currentMap=1,e.layers.models[this.currentMap].activate(),e.layers.models[2].trigger("change"),e.layers.models.length==4&&e.layers.models[3].trigger("change"),this.selectCurrentTab(),this.selectCurrentLegend()},selectMap:function(e){var t=this.map;t.layers.models[this.currentMap].deactivate(),this.currentMap=e,t.layers.models[this.currentMap].activate(),t.layers.models[2].trigger("change"),t.layers.models.length==4&&t.layers.models[3].trigger("change"),this.selectCurrentTab(),this.selectCurrentLegend()},selectCurrentLegend:function(e){$(".legend").removeClass("selected"),this.legends[this.currentMap].addClass("selected")},selectCurrentTab:function(){$(".tab").removeClass("selected"),this.tabs[this.currentMap].addClass("selected")},zoom_in:function(){var e=this.map.getZoom();e<=this.maxZoom&&this.map.setZoom(this.map.getZoom()+1)},zoom_out:function(){var e=this.map.getZoom();e>=this.minZoom&&this.map.setZoom(e-1)},setNamesOn:function(){layers.win.textName="county_name",layers.percentage.textName="county_name",layers.win.tile_style=layers.win.__getTyleStyle(),this.map.layers.models[0].attributes.tile_style=layers.win.tile_style,layers.percentage.tile_style=layers.percentage.__getTyleStyle(),this.map.layers.models[1].attributes.tile_style=layers.percentage.tile_style,this.$showNames.addClass("selected"),this.selectMap(this.currentMap)},setNamesOff:function(){layers.win.textName=undefined,layers.percentage.textName=undefined,layers.win.tile_style=layers.win.__getTyleStyle(),this.map.layers.models[0].attributes.tile_style=layers.win.tile_style,layers.percentage.tile_style=layers.percentage.__getTyleStyle(),this.map.layers.models[1].attributes.tile_style=layers.percentage.tile_style,this.$showNames.removeClass("selected"),this.selectMap(this.currentMap)},toggleNames:function(){this.namesOn?this.setNamesOff():this.setNamesOn(),this.namesOn=!this.namesOn}};
